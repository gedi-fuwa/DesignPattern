\chapter{Allgemein}

\section{nötige Projektanpassungen}
Für jedes neue Projekt in Rhapsody ist es nötig, die .hep-Datei "PatternLoader" in den Ordner <Projektname>_rpy zu kopieren. Im Rhapsodyprojekt muss nun ein neues Profil angelegt werden, welches "PatternLoader" heißt. In diesem Profil muss ein Stereotyp namens "JavaPlugin" erstellt werden. Um die Patterns letztendlich nutzen zu können, muss nur noch das Package namens "HFUDesignPatterns" importiert werden.

\section{Fehlerbehandlung}
Besitzt eine Benutzerklasse ungültigen Code für das ausgewählte Design Pattern (bspw. eine 
bereits vorhandene, vom Benutzer erstellte getInstance Methode beim Singleton Design Pattern) 
sollte der Code-Generierungsprozess abgebrochen werden. Hierbei wird eine spezifische Error-Klasse aufgerufen, die eine Methode in die zu erzeugende Klasse implementiert, welche im Klartext die Fehlermeldung beinhaltet. Dies verursacht einen Syntax-Error im C++-Code. Erst wenn diese Fehlermeldung aus dem Code entfernt wurde, kann wieder korrekter Code generiert werden.

\section{Roundtrip}

Wird für ein Modell Code generiert, wird überprüft, ob die Attribute und Methoden des entsprechenden Design Patterns bereits vorhanden sind. Ist dies der Fall, wird geprüft, ob es sich um die durch einen früheren Simplifizierungsvorgang erstellten Attribute/Methoden handelt, oder ob diese vom Nutzer erstellt wurden. Dann wird die Fehlerbehandlungsroutine durchgeführt. \\
Wird festgestellt, dass die Attribute/Funktionen aus einer früheren Simplifizierung stammen, werden sie mit dem Stand aus der Design Pattern Spezifikation überschrieben.

\chapter{Design Patterns}

Die Design Patterns müssen aus dem Package "HFUDesignPatterns" verwendet werden.

\section{Singleton}

\subsection{Verwendung}

Um das Singleton Design Pattern für eigene Klassen zu verwenden muss der Klasse, die als Singleton modelliert werden soll, lediglich der Stereotyp \textit{Singleton} hinzugefügt werden. Anschließend wird bei der Code-Generierung eine \textit{getInstance} Methode erstellt, mit welcher die einzelne Instanz der Klasse verwendet werden kann.

\subsection{Zu beachten}

Es dürfen keine Methoden vorhanden sein die den Namen getInstance besitzen.\\

\section{Observer}

\subsection{Verwendung}

Die Verwendung der Observer und Subject Klassen ist denkbar einfach: Hierzu muss
der Nutzer mindestens zwei Klassen im Klassendiagramm erstellen, denen dann die
Stereotypen Observer und Subject zugewiesen werden. Zwischen dem Observer und
den Subjects muss eine Assoziation modelliert werden. \\
Die update()-Funktionen der Observer muss selbst geschrieben werden, damit die
Observer auch eine Aktion ausführen können, wenn das Subject die notify-Funktion ausführt.

\subsubsection{Beispiel}

\subsection{Zu beachten}

Es dürfen keine Klassen oder Methoden vorhanden sein, die bereits Observer oder
Subject bzw. update oder register_observer delete_observer heißen.\\

Falls nur eine der benötigten Stereotypen zugewiesen wurde, gibt Rhapsody eine
entsprechende Meldung aus, erlaubt aber die Simplification.\\

